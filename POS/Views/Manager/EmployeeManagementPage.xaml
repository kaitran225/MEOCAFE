<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="POS.Views.Manager.EmployeeManagementPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="using:POS.Helpers.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:POS.Views.Manager"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:model="using:POS.Models"
    DataContext="{x:Bind ViewModel, Mode=TwoWay}"
    mc:Ignorable="d">
    <Page.Resources>
        <converters:RelativeToAbsoluteConverter x:Key="AbsoluteConverter" />
        <DataTemplate x:Key="EmployeeTemplateForm" x:DataType="model:Employee">
            <StackPanel>
                <TextBlock
                    Margin="0,0,0,20"
                    FontSize="20"
                    Text="THÊM NHÂN VIÊN" />

                <TextBox
                    x:Name="EmployeeName"
                    Margin="0,0,0,10"
                    PlaceholderText="Họ và tên"
                    Text="{x:Bind Fullname, Mode=TwoWay}" />

                <TextBox
                    x:Name="EmployeeUsername"
                    Margin="0,0,0,10"
                    PlaceholderText="Tên đăng nhập"
                    Text="{x:Bind Username, Mode=TwoWay}" />

                <TextBox
                    x:Name="EmployeePassword"
                    Margin="0,0,0,10"
                    PlaceholderText="Mật khẩu"
                    Text="{x:Bind Password, Mode=TwoWay}" />

                <TextBox
                    x:Name="EmployeePhoneNumber"
                    Margin="0,0,0,10"
                    PlaceholderText="Số điện thoại"
                    Text="{x:Bind PhoneNumber, Mode=TwoWay}" />

                <TextBox
                    x:Name="EmployeeGender"
                    Margin="0,0,0,10"
                    PlaceholderText="Giới tính"
                    Text="{x:Bind Gender, Mode=TwoWay}" />

                <TextBox
                    x:Name="EmployeeAddress"
                    Margin="0,0,0,10"
                    PlaceholderText="Địa chỉ"
                    Text="{x:Bind Address, Mode=TwoWay}" />

                <TextBox
                    x:Name="EmployeeDob"
                    Margin="0,0,0,10"
                    PlaceholderText="Ngày tháng năm sinh"
                    Text="{x:Bind Dob, Mode=TwoWay}" />

                <TextBox
                    x:Name="EmployeeRole"
                    Margin="0,0,0,10"
                    PlaceholderText="Chức vụ"
                    Text="{x:Bind Role, Mode=TwoWay}" />

            </StackPanel>
        </DataTemplate>
    </Page.Resources>

    <StackPanel HorizontalAlignment="Stretch" Orientation="Vertical">

        <Grid HorizontalAlignment="Stretch" VerticalAlignment="Center">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="5*" />
                <ColumnDefinition Width="2*" />
            </Grid.ColumnDefinitions>


            <StackPanel Grid.Column="0" Orientation="Horizontal">

                <Button
                    x:Name="addEmployeeBtn"
                    Margin="0,0,5,0"
                    Background="#9ef8a0"
                    Click="addEmployeeBtn_Click"
                    Content="Add Employee"
                    Foreground="#356c34" />
                <Button
                    x:Name="loadData"
                    Margin="0,0,5,0"
                    Background="#e1eb8b"
                    Click="loadBtn_Click"
                    Content="Load data"
                    Foreground="#88943a" />
                <Button
                    x:Name="printBtn"
                    Margin="0,0,5,0"
                    Background="Green"
                    Click="printBtn_Click"
                    Content="Print data" />
                <Button
                    x:Name="ExportBtn"
                    Margin="0,0,5,0"
                    Background="#f3908e"
                    Click="exportPdfBtn_Click"
                    Content="Export to Pdf " />
                <Button
                    x:Name="DeleteBtn"
                    Margin="0,0,5,0"
                    Background="#d0d0d0"
                    Click="DeleteBtn_Click"
                    Content="Delete "
                    Foreground="#4d4e50" />


            </StackPanel>


            <AutoSuggestBox
                x:Name="SearchBar"
                Grid.Column="1"
                Width="300"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                PlaceholderText="Type a Employee name"
                QueryIcon="Find"
                QuerySubmitted="SearchEmployee_QuerySubmitted"
                SuggestionChosen="SearchEmployee_SuggestionChosen"
                TextChanged="SearchEmployee_TextChanged" />

        </Grid>



        <Border
            Margin="0,10,0,10"
            BorderBrush="Gray"
            BorderThickness="0,0,0,1" />
        <!--  Divider  -->


        <Grid x:Name="Grid" HorizontalAlignment="Stretch">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="5*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>


            <ScrollViewer
                x:Name="scrollviewListEmployee"
                Grid.Column="0"
                Grid.ColumnSpan="2"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Top"
                HorizontalScrollBarVisibility="Auto"
                HorizontalScrollMode="Enabled"
                IsTabStop="True"
                IsVerticalScrollChainingEnabled="True"
                VerticalScrollBarVisibility="Auto"
                VerticalScrollMode="Enabled"
                ViewChanged="ScrollViewer_ViewChanged_1"
                ZoomMode="Enabled">

                <ListView
                    x:Name="ListEmployee"
                    Height="500"
                    ItemsSource="{x:Bind ViewModel.Employees}">
                    <!--  *******************HEADER***************  -->
                    <ListView.Header>
                        <Grid Padding="16,6" ColumnSpacing="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="0.5*" />
                                <ColumnDefinition Width="0.8*" />
                                <ColumnDefinition Width="1.5*" />
                                <ColumnDefinition Width="2*" />
                                <ColumnDefinition Width="2*" />
                                <ColumnDefinition Width="2.5*" />
                                <ColumnDefinition Width="1.2*" />
                                <ColumnDefinition Width="1.2*" />
                                <ColumnDefinition Width="1.2*" />
                                <ColumnDefinition Width="1.2*" />

                            </Grid.ColumnDefinitions>

                            <CheckBox
                                x:Name="HeaderCheckBox"
                                Grid.Column="0"
                                Width="10"
                                Padding="0,0,1,0"
                                HorizontalAlignment="Stretch"
                                Checked="HeaderCheckBox_Checked"
                                FontSize="10"
                                Unchecked="HeaderCheckBox_Unchecked" />

                            <TextBlock
                                Grid.Column="1"
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                Text="ID" />
                            <TextBlock
                                Grid.Column="2"
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                Text="Username" />
                            <TextBlock
                                Grid.Column="3"
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                Text="Fullname" />
                            <TextBlock
                                Grid.Column="4"
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                Text="Phone number" />
                            <TextBlock
                                Grid.Column="5"
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                Text="Address" />
                            <TextBlock
                                Grid.Column="6"
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                Text="Date of birth" />
                            <TextBlock
                                Grid.Column="7"
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                Text="Gender" />
                            <TextBlock
                                Grid.Column="8"
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                Text="Role" />
                            <TextBlock
                                Grid.Column="9"
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                Text="Actions" />
                        </Grid>
                    </ListView.Header>

                    <ListView.ItemTemplate>
                        <!--  *******************DATA***************  -->

                        <DataTemplate x:DataType="model:Employee">
                            <Grid ColumnSpacing="1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="0.5*" />
                                    <ColumnDefinition Width="0.8*" />
                                    <ColumnDefinition Width="1.5*" />
                                    <ColumnDefinition Width="2*" />
                                    <ColumnDefinition Width="2*" />
                                    <ColumnDefinition Width="2.5*" />
                                    <ColumnDefinition Width="1.2*" />
                                    <ColumnDefinition Width="1.2*" />
                                    <ColumnDefinition Width="1.2*" />
                                    <ColumnDefinition Width="1.2*" />

                                </Grid.ColumnDefinitions>
                                <CheckBox Grid.Column="0" />
                                <TextBlock Grid.Column="1" Text="{x:Bind ID}" />
                                <TextBlock Grid.Column="2" Text="{x:Bind Username}" />
                                <TextBlock Grid.Column="3" Text="{x:Bind Fullname}" />
                                <TextBlock Grid.Column="4" Text="{x:Bind PhoneNumber}" />
                                <TextBlock Grid.Column="5" Text="{x:Bind Address}" />
                                <TextBlock Grid.Column="6" Text="{x:Bind Dob}" />
                                <TextBlock Grid.Column="7" Text="{x:Bind Gender}" />
                                <TextBlock Grid.Column="8" Text="{x:Bind Role}" />
                                <StackPanel
                                    Grid.Column="9"
                                    Margin="0,0,10,0"
                                    Orientation="Horizontal">
                                    <Button Margin="0,0,2,0" Click="DeleteBtnEmployee_Click">
                                        <FontIcon
                                            Width="15"
                                            Height="15"
                                            FontSize="15"
                                            Foreground="Red"
                                            Glyph="&#xE74D;" />
                                    </Button>
                                    <Button Click="ButtonUpdate_Click">
                                        <FontIcon
                                            FontSize="15"
                                            Foreground="Yellow"
                                            Glyph="&#xF742;" />
                                    </Button>

                                </StackPanel>
                            </Grid>
                        </DataTemplate>
                    </ListView.ItemTemplate>

                    <ListView.ItemContainerStyle>
                        <Style BasedOn="{StaticResource DefaultListViewItemStyle}" TargetType="ListViewItem">
                            <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                        </Style>
                    </ListView.ItemContainerStyle>
                </ListView>
            </ScrollViewer>


            <StackPanel
                x:Name="AddEditEmployeeForm"
                Grid.Column="1"
                Orientation="Vertical"
                Visibility="Collapsed">
                <ContentControl Content="{x:Bind ViewModel.NewEmployee}" ContentTemplate="{StaticResource EmployeeTemplateForm}" />

                <StackPanel Orientation="Horizontal">
                    <Button
                        Width="75"
                        Margin="0,10,10,0"
                        HorizontalAlignment="Stretch"
                        Click="SaveBtn_Click"
                        Content="Save"
                        Style="{StaticResource AccentButtonStyle}" />
                    <Button
                        x:Name="CancleBtn"
                        Width="75"
                        Margin="0,10,10,0"
                        HorizontalAlignment="Stretch"
                        Click="CancleBtn_Click">
                        Cancle
                    </Button>
                </StackPanel>


            </StackPanel>
            <ContentDialog
                x:Name="UpdateEmployeeDialog"
                Title="Update Employee"
                PrimaryButtonClick="UpdateDialog_PrimaryButtonClick"
                PrimaryButtonText="Update"
                SecondaryButtonClick="UpdateDialog_SecondaryButtonClick"
                SecondaryButtonText="Cancel">
                <StackPanel>
                    <TextBox x:Name="UpdateFullName" Header="Full Name" />
                    <TextBox x:Name="UpdateUsername" Header="Username" />
                    <TextBox x:Name="UpdatePhoneNumber" Header="Phone Number" />
                    <TextBox x:Name="UpdateAddress" Header="Address" />
                    <TextBox x:Name="UpdateDob" Header="Date of Birth" />
                    <ComboBox x:Name="UpdateGender" Header="Gender">
                        <ComboBoxItem Content="Male" />
                        <ComboBoxItem Content="Female" />
                    </ComboBox>
                    <TextBox x:Name="UpdateRole" Header="Role" />
                </StackPanel>
            </ContentDialog>


        </Grid>



        <StackPanel
            Margin="0,10,0,10"
            HorizontalAlignment="Center"
            Orientation="Horizontal">
            <Button Click="PreButton_Click" Content="Trước" />
            <TextBlock Margin="10,0,10,0" VerticalAlignment="Center">
                <Run Text="{x:Bind ViewModel.CurrentPage, Mode=OneWay}" />
                <Run Text=" / " />
                <Run Text="{x:Bind ViewModel.TotalPages, Mode=OneWay}" />
            </TextBlock>
            <Button Click="NextButton_Click" Content="Sau" />

        </StackPanel>



    </StackPanel>
</Page>
